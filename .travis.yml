dist: xenial
sudo: false
language: python
python: "3.6"
cache: pip

install: pip install tox tox-venv

script: tox

stages:
    - name: static analysis
    - name: test
    # - name: deploy to PyPI

jobs:
  fast_finish: true
  allow_failures:
    - python: "2.7.6"
  include:
    - stage: static analysis
      env: TOXENV=flake8-27
      python: "2.7"

    - stage: static analysis
      env: TOXENV=flake8-37
      python: "3.7"

    - stage: test
      env: TOXENV=py27
      dist: trusty
      python: "2.7.6"

    - stage: test
      env: TOXENV=py27
      python: "2.7"

    - stage: test
      env: TOXENV=py34
      python: "3.4"

    - stage: test
      env: TOXENV=py35
      python: "3.5"

    - stage: test
      env: TOXENV=py36
      python: "3.6"

    - stage: test
      env: TOXENV=py37
      python: "3.7"

    # - stage: deploy to PyPI
    #   install: true
    #   script: skip
    #   deploy:
    #     provider: pypi
    #     user: InstaPy
    #     password:
    #       secure:
    #       distributions: sdist bdist_wheel
    #     on:
    #       tags: true
    #       repo:
    #       branches:
    #         only:
    #           - master

notifications:
  flowdock:
    secure: "YD74L+41DEjv2Bq5fG8vvIsuMG5iu8CHctes3CSfQw0j5SaPcASsKe6twXBCLsGB5IwzgYk7RUEnOsqA6kLqfWChJ3kO4lBCYBKSaGSG84VjwUlMOVG4n0jt7SLiHRjQ6sBhwFhWE64yAZPbdDuYtrUtVbb9Ui+dLUyBab1o7Cw="
